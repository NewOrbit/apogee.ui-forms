(function(){function uiForm(e,r){return{restrict:"A",transclude:!0,terminal:!0,controller:function(){},link:function(t,i,n,m,o){var a=n.controller,l=a?a+".":"";m.controller=a,m.cPrefix=l,i.attr("name",l+"form"),i.attr("ng-submit",l+"form.$valid && "+l+"submit()"),i.attr("ng-class","{ attempted: "+l+"form.$submitted }"),i.attr("novalidate",""),r.form["class"]&&i.addClass(r.form["class"]),i.removeAttr("ui-form"),e(i)(t),o(function(e){i.prepend(e)})}}}function uiFormElement(e,r){return{restrict:"A",require:["uiFormElement","^uiForm"],transclude:!0,terminal:!0,controller:function(){},link:function(t,i,n,m,o){var a=m[0],l=m[1],u=l.cPrefix,d=t.$eval(n.uiFormElement)||{model:n.uiFormElement},s={validate:!0},c=angular.extend({},s,d);c.required=!_.isUndefined(n.required);var f=r.form.dataContainer,p=u+(f?f+".":"")+c.model,F=c.model.split("."),v=_.last(F),g=c.name||v[0].toUpperCase()+v.substring(1),q=(F.length>1?_.first(p.split("."))+".":"")+"form."+g;if(a.options=c,a.model=p,a.formFieldName=g,a.elementId="fe_"+_.uniqueId(),r.element["class"]&&i.addClass(r.element["class"]),c.validate){c.required&&i.addClass("required");var $=function(e){return angular.element(r.element.templates.validation.entry).text(r.element.messages[e]).attr("ng-if",q+".$error."+e)},b=angular.element(r.element.templates.validation.container).attr("ng-if",u+"form.$submitted");_.each(r.element.validators,function(e){b.append($(e))}),i.append(b),i.attr("ng-class","{ invalid: "+q+".$invalid }")}i.removeAttr("ui-form-element"),e(i)(t),o(function(e){i.prepend(e)})}}}function uiFormInput(e){return{restrict:"A",priority:1e3,require:"^uiFormElement",terminal:!0,link:function(r,t,i,n){t.attr("id",n.elementId),t.attr("name",n.formFieldName),t.attr("ng-model",n.model),n.options.required&&t.attr("required","required"),t.removeAttr("ui-form-input"),e(t)(r)}}}function uiFormLabel(e){return{restrict:"A",priority:1e3,require:"^uiFormElement",terminal:!0,link:function(r,t,i,n){t.attr("for",n.elementId),t.removeAttr("ui-form-label"),e(t)(r)}}}uiForm.$inject=["$compile","uiFormConfig"];var uiFormConfig={form:{dataContainer:"entity"},element:{validators:["required","email","number"],templates:{validation:{container:"<span></span>",entry:"<span></span>"}},messages:{required:"This field is required",email:"Invalid email format",number:"Invalid number format"}}};uiFormElement.$inject=["$compile","uiFormConfig"],uiFormInput.$inject=["$compile"],uiFormLabel.$inject=["$compile"],angular.module("apogee.ui-forms",[]).directive("uiForm",uiForm).directive("uiFormElement",uiFormElement).directive("uiFormInput",uiFormInput).directive("uiFormLabel",uiFormLabel).value("uiFormConfig",uiFormConfig);})();